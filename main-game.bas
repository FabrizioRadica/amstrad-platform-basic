5 'A Game by Fabrizio Radica - www.retroacademy.it
10 CLEAR:CALL &BC02:MODE 0:CLS:BORDER 0:INK 0,0:ON BREAK GOSUB 8000
20 OUT &BC00,0:OUT &BD00,127
30 OUT &BC00,4:OUT &BD00,18
40 OUT &BC00,5:OUT &BD00,15
50 OUT &BC00,6:OUT &BD00,15
60 OUT &BC00,7:OUT &BD00,17
70 WINDOW #0,1,20,1,15: ORIGIN -1,-1
200 SYMBOL 240,&X111100,&X1111110,&X11101011,&X11111111,&X11111111,&X11000011,&X1100110,&X111100 'player right
205 SYMBOL 251,&X111100,&X1111110,&X11010111,&X11111111,&X11111111,&X11000011,&X1100110,&X111100 'player left
210 SYMBOL 245,&X11111110,&X11111110,&X11111110,&X11111110,&X11111110,&X11111100,&X0,&X0 'wall
220 SYMBOL 246,&X1111110,&X1,&X1,&X1,&X1,&X1,&X0,&X0 'background
222 SYMBOL 247,&X111100,&X1111110,&X11111011,&X11111111,&X11111111,&X11111111,&X1111110,&X111100 'bonus
230 SYMBOL 250,&X10000001,&X11111111,&X10000001,&X11111111,&X10000001,&X11111111,&X10000001,&X11111111 'ladder
250 maxx%=20:maxy%=11:lev%=0:DIM map%(maxy%,maxx%):XOROn$=CHR$(23)+CHR$(1):XOROff$=CHR$(23)+CHR$(0)
260 'Read Map
280 FOR y%=1 TO maxy%:FOR x%=1 TO maxx%:READ a%:map%(y%,x%)=a%:LOCATE x%,y%:ON map%(y%,x%) GOSUB 4100,4200,4300,4400:NEXT x%:NEXT y%
290 x%=4+(32*4):y%=400-16*4:vx%=16:vy%=4:walk=0:frcount=1:pframe$(frcount)=CHR$(240):pframe$(frcount+1)=CHR$(251) 'Start Sprite position
295 PRINT XOROn$;:GOSUB 5000
300 'Main loop - Collisions
320 yct%=(400-y%+20)/16:ycd%=(400-y%+8)/16
330 xcl%=(x%+32)/32:xcr%=(x%+16)/32
400 'LOCATE 1,14: PRINT walk 'debug
600 IF NOT(INKEY(8)) THEN IF (TEST(x%-8,y%-6)<>9) THEN IF (TEST(x%-8,y%-14)<>9) THEN GOSUB 5000:frcount=2:x%=x%-vx%:GOSUB 5000
700 IF NOT(INKEY(1)) THEN IF (TEST(x%+32,y%-6)<>9) THEN IF (TEST(x%+32,y%-14)<>9) THEN GOSUB 5000:frcount=1:x%=x%+vx%:GOSUB 5000
800 IF NOT(INKEY(0)) THEN IF (TEST(x%,y%+2)<>9) THEN IF (TEST(x%+28,y%+2)<>9) THEN IF walk=1 THEN GOSUB 5000:y%=y%+vy%:GOSUB 5000
900 IF NOT(INKEY(2)) THEN IF (TEST(x%,y%-18)<>9) THEN IF (TEST(x%+20,y%-18)<>9) THEN GOSUB 5000:y%=y%-vy%:GOSUB 5000
950 IF map%(ycd%+1,xcl%)=0 THEN walk=0:GOSUB 5000:y%=y%-vy%:GOSUB 5000 ELSE walk=1
1000 IF map%(ycd%,xcl%)=3 THEN map%(ycd%,xcl%)=0:LOCATE xcl%,ycd%:PRINT" ";:MOVE x%,y%:TAG:PRINT" ";:TAGOFF:GOSUB 5000:LOCATE 1,12:sc%=sc%+1:PRINT sc%
1010 'TAG:MOVE 32,400-32:PRINT CHR$(247);:TAGOFF
1200 GOTO 320
1990 'Map Data
2000 DATA 0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0
2100 DATA 1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1
2200 DATA 1,0,0,0,0,0,0,1,0,0,2,0,4,0,0,0,0,0,0,1
2300 DATA 1,0,0,0,0,0,0,1,0,0,2,1,1,0,0,0,0,0,0,1
2400 DATA 1,0,0,0,0,1,1,1,0,0,2,1,0,0,0,3,0,2,0,1
2500 DATA 1,0,0,0,1,1,1,0,0,0,2,0,0,1,1,1,1,2,0,1
2600 DATA 1,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,2,0,1
2700 DATA 1,0,0,0,0,2,1,1,1,1,1,1,1,0,0,0,0,2,0,1
2800 DATA 1,0,0,0,0,2,0,0,0,0,0,0,1,0,0,0,0,2,0,1
2900 DATA 1,0,3,0,0,2,0,0,3,0,4,0,1,0,0,3,0,2,0,1
3000 DATA 0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0
3990 'Tiles
4100 PRINT CHR$(15);CHR$(9);CHR$(245);
4110 POKE &BFAC+x%*4+y%*80,&60:RETURN
4200 PRINT CHR$(15);CHR$(4);CHR$(250);:RETURN
4300 PRINT CHR$(15);CHR$(7);CHR$(247);:RETURN
4400 PRINT CHR$(15);CHR$(3);CHR$(251);:RETURN
4990 'Sprite
5000 CALL &BD19:PRINT XOROn$;:TAG:MOVE x%,y%:PRINT pframe$(frcount);:TAGOFF:PRINT XOROff$;:RETURN
8000 CLEAR:CALL &BC02:PEN 1:MODE 2:print "Hi, Visit www.retroacademy.it ":print "Special Thanks to CPCWiki Crew :)":print" "
8010 OUT &BC00,0: OUT &BD00,&3F
8020 OUT &BC00,1: OUT &BD00,&28
8030 OUT &BC00,2: OUT &BD00,&2E
8040 OUT &BC00,3: OUT &BD00,&8E
8050 OUT &BC00,4: OUT &BD00,&26
8060 OUT &BC00,5: OUT &BD00,&00
8070 OUT &BC00,6: OUT &BD00,&19
8080 OUT &BC00,7: OUT &BD00,&1E
8090 OUT &BC00,8: OUT &BD00,&00
8100 OUT &BC00,9: OUT &BD00,&07
8110 OUT &BC00,10: OUT &BD00,&00
8120 OUT &BC00,11: OUT &BD00,&00
8130 OUT &BC00,12: OUT &BD00,&30
8140 OUT &BC00,13: OUT &BD00,&00
8150 OUT &BC00,14: OUT &BD00,&00
8160 OUT &BC00,15: OUT &BD00,&00
